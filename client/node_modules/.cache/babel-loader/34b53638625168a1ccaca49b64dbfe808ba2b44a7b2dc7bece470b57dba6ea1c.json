{"ast":null,"code":"var _jsxFileName = \"/Users/kevinchoi/Development/se-prep/phase-5/safe-bites-app/client/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport LoginForm from '../components/LoginForm';\nimport { Container, Typography, Paper, Box, CircularProgress, Alert } from '@mui/material';\nimport { useUserState, useUserDispatch } from '../UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const {\n    status,\n    error\n  } = useUserState();\n  const dispatch = useUserDispatch();\n  const navigate = useNavigate();\n  const handleLogin = async (values, {\n    resetForm\n  }) => {\n    dispatch({\n      type: 'SET_STATUS',\n      payload: 'loading'\n    });\n    try {\n      const response = await fetch('/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(values)\n      });\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Login failed');\n      }\n      const userData = await response.json();\n      dispatch({\n        type: 'SET_USER',\n        payload: userData\n      });\n      navigate('/home');\n    } catch (err) {\n      dispatch({\n        type: 'SET_ERROR',\n        payload: err.message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    sx: {\n      mt: 8,\n      mb: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        padding: 4,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h1\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), status === 'loading' && /*#__PURE__*/_jsxDEV(CircularProgress, {\n        sx: {\n          mt: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 34\n      }, this), status === 'failed' && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(LoginForm, {\n        onSubmit: handleLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"QPzVlSQq0kaOOtE0mTWAfkSHzD8=\", false, function () {\n  return [useUserState, useUserDispatch, useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useNavigate","LoginForm","Container","Typography","Paper","Box","CircularProgress","Alert","useUserState","useUserDispatch","jsxDEV","_jsxDEV","Login","_s","status","error","dispatch","navigate","handleLogin","values","resetForm","type","payload","response","fetch","method","headers","body","JSON","stringify","ok","data","json","Error","userData","err","message","component","maxWidth","sx","mt","mb","children","elevation","padding","display","flexDirection","alignItems","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","severity","onSubmit","_c","$RefreshReg$"],"sources":["/Users/kevinchoi/Development/se-prep/phase-5/safe-bites-app/client/src/pages/Login.js"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport LoginForm from '../components/LoginForm';\nimport { Container, Typography, Paper, Box, CircularProgress, Alert } from '@mui/material';\nimport { useUserState, useUserDispatch } from '../UserContext';\n\nconst Login = () => {\n  const { status, error } = useUserState();\n  const dispatch = useUserDispatch();\n  const navigate = useNavigate();\n\n  const handleLogin = async (values, { resetForm }) => {\n    dispatch({ type: 'SET_STATUS', payload: 'loading' });\n\n    try {\n      const response = await fetch('/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(values),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || 'Login failed');\n      }\n\n      const userData = await response.json();\n      dispatch({ type: 'SET_USER', payload: userData });\n\n      navigate('/home');\n\n    } catch (err) {\n      dispatch({ type: 'SET_ERROR', payload: err.message });\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\" sx={{ mt: 8, mb: 4 }}>\n      <Paper elevation={3} sx={{ padding: 4, display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n        <Typography variant=\"h1\" component=\"h1\" gutterBottom>\n          Login\n        </Typography>\n\n        {status === 'loading' && <CircularProgress sx={{ mt: 2 }} />}\n        {status === 'failed' && <Alert severity=\"error\" sx={{ mt: 2 }}>{error}</Alert>}\n\n        <LoginForm onSubmit={handleLogin} />\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}